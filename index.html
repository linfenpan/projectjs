<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>脚本项目</title>
</head>
<body>
    <div id="test"></div>
</body>

<!-- <script src="./mods/global.js" charset="utf-8"></script>
<script src="./mods/path.js" charset="utf-8"></script>
<script src="./mods/scriptLoader.js" charset="utf-8"></script>
<script src="./mods/pXMLHttpRequest.js" charset="utf-8"></script>
<script src="./mods/main_global.js" charset="utf-8"></script>
<script src="./mods/main_config.js" charset="utf-8"></script>
<script src="./mods/main_define.js" charset="utf-8"></script>
<script src="./mods/main_require.js" charset="utf-8"></script>
<script src="./mods/main_interface.js" charset="utf-8"></script> -->

<script src="./project.min.js" charset="utf-8"></script>

<script type="text/javascript">
function toJSON(json){
    return window.JSON ? window.JSON.parse(json) : (new Function("return " + json))();
};
</script>

<script type="text/javascript">

    // 允许分开配置
    require.config({ basePath: "test" });
    require.config({
        template: {
            data4: "data4.js"
        },
        alias: {
            author: "da宗熊"
        }
    });

    require("./data1.js", function(data){
        console.assert(data, "require(\"moduleA\", function(){}); 失败");
        console.log(data);
    });
    require("./data2.js", function(data){
        console.assert(data, "require(\"具体内容\", function(){}); 失败");
        console.log(data);
    });

    define("inner", "内联脚本中，define(module, text) 功能");
    require("inner", function(inner){
        console.assert(inner, "内联脚本，模块定义: define(module, text)，不通过")
        console.log(inner);
    });
    require("./data3.js", function(data){
        console.assert(data, "模块定义: define(content)，不通过");
        console.log(data);
    });

    require("./{data4}", function(data){
        console.assert(data, "require.config({ template: {} });，不通过");
        console.assert(data.author, "require.config({ alias: {} });，不通过");
        console.log(data);
    });
    require("./data5.js", function(data){
        console.assert(data.inner, "模块加载: 多个define, 不通过");
        console.assert(data.outer, "模块加载: 加载外部脚本, 不通过");
        console.log(data);
    });

    require("./data6.js", function(data){
        var canAsync = false;
        data.async(function(pass){
            console.assert(pass, "异步加载: require(url, callback), 不通过");
            console.assert(canAsync, "异步加载: require(url, callback), 没有异步执行");
            console.log(pass);
        });
        canAsync = true;
    });

    require("./data7.json", function(json){
        json = json ? toJSON(json) : null;
        console.assert(json, "ajax加载: 不通过");
        console.log(json);
    });
    require("data8.js", function(data){
        console.assert(data, "模块加载: 加载 ajax 内容，不通过");
        console.log(data);
    });

    console.log("样式路径:" + require.url("data9.css"));
    require.css("data9.css");
    setTimeout(function(){
        console.assert(document.getElementById("test").clientWidth === 200, "样式加载失败");
    }, 500);

    require("data10.js", function(data){
        console.assert(data.url, "require.url: 不通过");
        console.log("data10路径:" + data.url);
    });

    define("innerRequire", function(require, exports, module){
        var data11 = require("./data11.js");
        module.exports = data11;
    });
    require("innerRequire", function(pass){
        console.assert(pass, "内联脚本: require功能, 不通过");
        console.log("内联脚本define，require加载data11.js:" + pass);
    });

    require("./data12.js", function(data12){
        console.assert(data12, "模块加载: 多次 define(methodA, fnc)，不通过");
        console.log("测试多次define(method, func):" + data12);
    });

    require("./data13.js", function(data13){
        console.assert(!data13, "模块加载: 没有define不该有内容，不通过");
        console.log("data13应该没有内容:", data13);
    });

    require("./data14.js", function(data14){
        console.assert(!data14, "模块加载: 没有模块出口，不该有内容，不通过");
        console.log("data14应该没有内容:", data14);
    });
</script>
</html>
